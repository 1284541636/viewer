/*!
 * Viewer v0.7.0
 * https://github.com/fengyuanchen/viewer
 *
 * Copyright (c) 2015-2018 Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2018-03-11T02:48:43.666Z
 */
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],i):i(t.jQuery)}(this,function(p){"use strict";p=p&&p.hasOwnProperty("default")?p.default:p;var s={inline:!1,button:!0,navbar:!0,title:!0,toolbar:!0,tooltip:!0,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,transition:!0,fullscreen:!0,keyboard:!0,interval:5e3,minWidth:200,minHeight:100,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,zIndex:2015,zIndexInline:0,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null},t="undefined"!=typeof window?window:{},l="viewer",r="move",h="switch",d="zoom",c=l+"-active",u=l+"-fade",v=l+"-fixed",n=l+"-fullscreen-exit",m=l+"-hide",i=l+"-hide-md-down",e=l+"-hide-sm-down",a=l+"-hide-xs-down",f=l+"-in",g=l+"-invisible",o=l+"-open",w=l+"-show",b=l+"-transition",y="ready",x="show",$="shown",C="hide",z="hidden",k="view",I="viewed",F="click",T="dragstart",Y="keydown",E="load",M=t.PointerEvent?"pointerdown":"touchstart mousedown",X=t.PointerEvent?"pointermove":"mousemove touchmove",D=t.PointerEvent?"pointerup pointercancel":"touchend touchcancel mouseup",q="resize",R="transitionend",P="wheel mousewheel DOMMouseScroll";function N(t){return"string"==typeof t}var W=Number.isNaN||t.isNaN;function L(t){return"number"==typeof t&&!W(t)}function j(t){return void 0===t}function A(s,n){for(var t=arguments.length,a=Array(2<t?t-2:0),i=2;i<t;i++)a[i-2]=arguments[i];return function(){for(var t=arguments.length,i=Array(t),e=0;e<t;e++)i[e]=arguments[e];return s.apply(n,a.concat(i))}}var O=Object.keys||function(t){var i=[];return p.each(t,function(t){i.push(t)}),i};var S=t.navigator,H=S&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(S.userAgent);function V(t,i){if(!t.naturalWidth||H){var e=document.createElement("img");e.onload=function(){i(e.width,e.height)},e.src=t.src}else i(t.naturalWidth,t.naturalHeight)}function K(t){switch(t){case 2:return a;case 3:return e;case 4:return i;default:return""}}function U(t,i){var e=t.pageX,s=t.pageY,n={endX:e,endY:s};return i?n:p.extend({startX:e,startY:s},n)}var Z={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initContainer:function(){var t=p(window);this.container={width:t.innerWidth(),height:t.innerHeight()}},initViewer:function(){var t=this.options,i=this.$parent,e=void 0;t.inline&&(e={width:Math.max(i.width(),t.minWidth),height:Math.max(i.height(),t.minHeight)},this.parent=e),!this.fulled&&e||(e=this.container),this.viewer=p.extend({},e)},renderViewer:function(){this.options.inline&&!this.fulled&&this.$viewer.css(this.viewer)},initList:function(){var t=this.$element,o=this.options,i=this.$list,r=[];this.$images.each(function(t,i){var e,s=i.alt||(N(e=i)?e.replace(/^.*\//,"").replace(/[?&#].*$/,""):""),n=i.src,a=o.url;N(a)?a=i.getAttribute(a):p.isFunction(a)&&(a=a.call(i,i)),(n||a)&&r.push('<li><img src="'+(n||a)+'" data-action="view" data-index="'+t+'" data-original-url="'+(a||n)+'" alt="'+s+'"></li>')}),i.html(r.join("")).find("img").one(E,{filled:!0},p.proxy(this.loadImage,this)),this.$items=i.children(),o.transition&&t.one(I,function(){i.addClass(b)})},renderList:function(t){var i=t||this.index,e=this.$items.eq(i).width(),s=e+1;this.$list.css({width:s*this.length,marginLeft:(this.viewer.width-e)/2-s*i})},resetList:function(){this.$list.empty().removeClass(b).css("margin-left",0)},initImage:function(r){var h=this,l=this.options,t=this.$image,i=this.viewer,e=this.$footer.height(),d=i.width,c=Math.max(i.height-e,e),u=this.image||{};V(t[0],function(t,i){var e=t/i,s=d,n=c;d<c*e?n=d/e:s=c*e;var a={naturalWidth:t,naturalHeight:i,aspectRatio:e,ratio:(s=Math.min(.9*s,t))/t,width:s,height:n=Math.min(.9*n,i),left:(d-s)/2,top:(c-n)/2},o=p.extend({},a);l.rotatable&&(a.rotate=u.rotate||0,o.rotate=0),l.scalable&&(a.scaleX=u.scaleX||1,a.scaleY=u.scaleY||1,o.scaleX=1,o.scaleY=1),h.image=a,h.initialImage=o,p.isFunction(r)&&r()})},renderImage:function(t){var i,e,s,n,a,o=this.image,r=this.$image;r.css({width:o.width,height:o.height,marginLeft:o.left,marginTop:o.top,transform:(i=o,e=i.rotate,s=i.scaleX,n=i.scaleY,a=[],L(e)&&0!==e&&a.push("rotate("+e+"deg)"),L(s)&&1!==s&&a.push("scaleX("+s+")"),L(n)&&1!==n&&a.push("scaleY("+n+")"),0<a.length?a.join(" "):"none")}),p.isFunction(t)&&(this.transitioning?r.one(R,t):t())},resetImage:function(){this.$image&&(this.$image.remove(),this.$image=null)}},_={bind:function(){var t=this.$element,i=this.options;p.isFunction(i.view)&&t.on(k,i.view),p.isFunction(i.viewed)&&t.on(I,i.viewed),this.$viewer.on(F,p.proxy(this.click,this)).on(P,p.proxy(this.wheel,this)).on(T,p.proxy(this.dragstart,this)),this.$canvas.on(M,p.proxy(this.pointerdown,this)),p(this.element.ownerDocument).on(X,this.onPointerMove=A(this.pointermove,this)).on(D,this.onPointerUp=A(this.pointerup,this)).on(Y,this.onKeyDown=A(this.keydown,this)),p(window).on(q,this.onResize=A(this.resize,this))},unbind:function(){var t=this.$element,i=this.options;p.isFunction(i.view)&&t.off(k,i.view),p.isFunction(i.viewed)&&t.off(I,i.viewed),this.$viewer.off(F,this.click).off(P,this.wheel).off(T,this.dragstart),this.$canvas.off(M,this.pointerdown),p(this.element.ownerDocument).off(X,this.onPointerMove).off(D,this.onPointerUp).off(Y,this.onKeyDown),p(window).off(q,this.onResize)}},B={click:function(t){var i=p(t.target),e=i.data("action"),s=this.image;switch(e){case"mix":this.played?this.stop():this.options.inline?this.fulled?this.exit():this.full():this.hide();break;case"view":this.view(i.data("index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev();break;case"play":this.play();break;case"next":this.next();break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-s.scaleX||-1);break;case"flip-vertical":this.scaleY(-s.scaleY||-1);break;default:this.played&&this.stop()}},dragstart:function(t){p(t.target).is("img")&&t.preventDefault()},keydown:function(t){var i=this.options;if(this.fulled&&i.keyboard)switch(t.which){case 27:this.played?this.stop():i.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.prev();break;case 38:t.preventDefault(),this.zoom(i.zoomRatio,!0);break;case 39:this.next();break;case 40:t.preventDefault(),this.zoom(-i.zoomRatio,!0);break;case 48:case 49:(t.ctrlKey||t.shiftKey)&&(t.preventDefault(),this.toggle())}},load:function(){var t=this,i=this.options,e=this.viewer,s=this.$image;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1),s&&(s.removeClass(g).css("cssText","width:0;height:0;margin-left:"+e.width/2+"px;margin-top:"+e.height/2+"px;max-width:none!important;visibility:visible;"),this.initImage(function(){s.toggleClass(b,i.transition).toggleClass("viewer-move",i.movable),t.renderImage(function(){t.viewed=!0,t.trigger(I)})}))},loadImage:function(t){var i=t.target,a=p(i),e=a.parent(),o=e.width(),r=e.height(),h=t.data&&t.data.filled;V(i,function(t,i){var e=t/i,s=o,n=r;o<r*e?h?s=r*e:n=o/e:h?n=o/e:s=r*e,a.css({width:s,height:n,marginLeft:(o-s)/2,marginTop:(r-n)/2})})},pointerdown:function(t){if(this.viewed&&!this.transitioning){var i=this.options,e=this.pointers,s=t.originalEvent;s&&s.changedTouches?p.each(s.changedTouches,function(t,i){e[i.identifier]=U(i)}):e[s&&s.pointerId||0]=U(s||t);var n=!!i.movable&&r;1<O(e).length?n=d:"touch"!==t.pointerType&&"touchstart"!==t.type||!this.isSwitchable()||(n=h),this.action=n}},pointermove:function(t){var i=this.$image,e=this.action,s=this.pointers;if(this.viewed&&e){t.preventDefault();var n=t.originalEvent;n&&n.changedTouches?p.each(n.changedTouches,function(t,i){p.extend(s[i.identifier],U(i,!0))}):p.extend(s[n&&n.pointerId||0],U(n||t,!0)),e===r&&this.options.transition&&i.hasClass(b)&&i.removeClass(b),this.change(t)}},pointerup:function(t){var i=this.action,e=this.pointers,s=t.originalEvent;s&&s.changedTouches?p.each(s.changedTouches,function(t,i){delete e[i.identifier]}):delete e[s&&s.pointerId||0],i&&(i===r&&this.options.transition&&this.$image.addClass(b),this.action=!1)},resize:function(){var t=this;if(this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){t.renderImage()}),this.played){if(this.options.fullscreen&&this.fulled&&!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement)return void this.stop();this.$player.find("img").one(E,p.proxy(this.loadImage,this)).trigger(E)}},start:function(t){var i=t.target;p(i).is("img")&&(this.target=i,this.show())},wheel:function(t){var i=this;if(this.viewed&&(t.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50);var e=t.originalEvent||t,s=1;e.deltaY?s=0<e.deltaY?1:-1:e.wheelDelta?s=-e.wheelDelta/120:e.detail&&(s=0<e.detail?1:-1),this.zoom(-s*(Number(this.options.zoomRatio)||.1),!0,t)}}},Q={show:function(){var t=this,i=this.$element,e=this.options;if(!(e.inline||this.transitioning||this.visible)){this.ready||this.build();var s=this.$viewer;p.isFunction(e.show)&&i.one(x,e.show),this.trigger(x).isDefaultPrevented()||(this.open(),s.removeClass(m),i.one($,function(){t.view(t.target?t.$images.index(t.target):t.index),t.target=!1}),e.transition?(this.transitioning=!0,s.addClass(b),s[0].offsetWidth,s.one(R,p.proxy(this.shown,this)).addClass(f)):(s.addClass(f),this.shown()))}},hide:function(){var t=this,i=this.options,e=this.$viewer;i.inline||this.transitioning||!this.visible||(p.isFunction(i.hide)&&this.$element.one(C,i.hide),this.trigger(C).isDefaultPrevented()||(this.viewed&&i.transition?(this.transitioning=!0,this.$image.one(R,function(){e.one(R,p.proxy(t.hidden,t)).removeClass(f)}),this.zoomTo(0,!1,!1,!0)):(e.removeClass(f),this.hidden())))},view:function(t){var s=this;if(t=Number(t)||0,!(!this.visible||this.played||t<0||t>=this.length||this.viewed&&t===this.index||this.trigger(k).isDefaultPrevented())){var i=this.$items.eq(t),e=i.find("img"),n=e.attr("alt"),a=p('<img src="'+e.data("originalUrl")+'" alt="'+n+'">');this.$image=a,this.$items.eq(this.index).removeClass(c),i.addClass(c),this.viewed=!1,this.index=t,this.image=null,this.$canvas.html(a.addClass(g)),this.renderList();var o=this.$title;o.empty(),this.$element.one(I,function(){var t=s.image,i=t.naturalWidth,e=t.naturalHeight;o.html(n+" ("+i+" &times; "+e+")")}),a[0].complete?this.load():(a.one(E,p.proxy(this.load,this)),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){a.removeClass(g),s.timeout=!1},1e3))}},prev:function(){this.view(Math.max(this.index-1,0))},next:function(){this.view(Math.min(this.index+1,this.length-1))},move:function(t,i){var e=this.image,s=e.left,n=e.top;this.moveTo(j(t)?t:s+Number(t),j(i)?i:n+Number(i))},moveTo:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t;if(this.viewed&&!this.played&&this.options.movable){var e=this.image,s=!1;t=Number(t),i=Number(i),L(t)&&(e.left=t,s=!0),L(i)&&(e.top=i,s=!0),s&&this.renderImage()}},zoom:function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,s=this.image;t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(s.width*t/s.naturalWidth,i,e)},zoomTo:function(t){var i,n,a,o,e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],h=this.options,l=this.image,d=this.pointers;if(L(t=Math.max(0,t))&&this.viewed&&!this.played&&(r||h.zoomable)){if(!r){var c=Math.max(.01,h.minZoomRatio),u=Math.min(100,h.maxZoomRatio);t=Math.min(Math.max(t,c),u)}s&&.95<t&&t<1.05&&(t=1);var v=l.naturalWidth*t,m=l.naturalHeight*t;if(s&&s.originalEvent){var f=this.$viewer.offset(),g=d&&0<O(d).length?(i=d,o=a=n=0,p.each(i,function(t,i){var e=i.startX,s=i.startY;n+=e,a+=s,o+=1}),{pageX:n/=o,pageY:a/=o}):{pageX:s.pageX||s.originalEvent.pageX||0,pageY:s.pageY||s.originalEvent.pageY||0};l.left-=(v-l.width)*((g.pageX-f.left-l.left)/l.width),l.top-=(m-l.height)*((g.pageY-f.top-l.top)/l.height)}else l.left-=(v-l.width)/2,l.top-=(m-l.height)/2;l.width=v,l.height=m,l.ratio=t,this.renderImage(),e&&this.tooltip()}},rotate:function(t){this.rotateTo((this.image.rotate||0)+Number(t))},rotateTo:function(t){var i=this.image;L(t=Number(t))&&this.viewed&&!this.played&&this.options.rotatable&&(i.rotate=t,this.renderImage())},scaleX:function(t){this.scale(t,this.image.scaleY)},scaleY:function(t){this.scale(this.image.scaleX,t)},scale:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t;if(this.viewed&&!this.played&&this.options.scalable){var e=this.image,s=!1;t=Number(t),i=Number(i),L(t)&&(e.scaleX=t,s=!0),L(i)&&(e.scaleY=i,s=!0),s&&this.renderImage()}},play:function(){var a=this;if(this.visible&&!this.played){var o=this.options,t=this.$items,r=this.$player;o.fullscreen&&this.requestFullscreen(),this.played=!0,r.addClass(w);var h=[],l=0;if(t.each(function(t,i){var e=p(i),s=e.find("img"),n=p('<img src="'+s.data("originalUrl")+'" alt="'+s.attr("alt")+'">');n.addClass(u).toggleClass(b,o.transition),e.hasClass(c)&&(n.addClass(f),l=t),h.push(n),n.one(E,{filled:!1},p.proxy(a.loadImage,a)),r.append(n)}),L(o.interval)&&0<o.interval){var i=t.length;1<i&&function t(){a.playing=setTimeout(function(){h[l].removeClass(f),h[l=(l+=1)<i?l:0].addClass(f),t()},o.interval)}()}}},stop:function(){this.played&&(this.options.fullscreen&&this.exitFullscreen(),this.played=!1,clearTimeout(this.playing),this.$player.removeClass(w).empty())},full:function(){var t=this,i=this.options,e=this.$image,s=this.$list;this.visible&&!this.played&&!this.fulled&&i.inline&&(this.fulled=!0,this.open(),this.$button.addClass(n),i.transition&&(e.removeClass(b),s.removeClass(b)),this.$viewer.addClass(v).removeAttr("style").css("z-index",i.zIndex),this.initContainer(),this.viewer=p.extend({},this.container),this.renderList(),this.initImage(function(){t.renderImage(function(){i.transition&&setTimeout(function(){e.addClass(b),s.addClass(b)},0)})}))},exit:function(){var t=this;if(this.fulled){var i=this.options,e=this.$image,s=this.$list;this.fulled=!1,this.close(),this.$button.removeClass(n),i.transition&&(e.removeClass(b),s.removeClass(b)),this.$viewer.removeClass(v).css("z-index",i.zIndexInline),this.viewer=p.extend({},this.parent),this.renderViewer(),this.renderList(),this.initImage(function(){t.renderImage(function(){i.transition&&setTimeout(function(){e.addClass(b),s.addClass(b)},0)})})}},tooltip:function(){var t=this,i=this.options,e=this.$tooltip,s=this.image,n=[w,u,b].join(" ");this.viewed&&!this.played&&i.tooltip&&(e.text(Math.round(100*s.ratio)+"%"),this.tooltiping?clearTimeout(this.tooltiping):i.transition?(this.fading&&e.trigger(R),e.addClass(n),e[0].offsetWidth,e.addClass(f)):e.addClass(w),this.tooltiping=setTimeout(function(){i.transition?(e.one(R,function(){e.removeClass(n),t.fading=!1}).removeClass(f),t.fading=!0):e.removeClass(w),t.tooltiping=!1},1e3))},toggle:function(){1===this.image.ratio?this.zoomTo(this.initialImage.ratio,!0):this.zoomTo(1,!0)},reset:function(){this.viewed&&!this.played&&(this.image=p.extend({},this.initialImage),this.renderImage())},update:function(){var t=this.$element,n=this.$images;if(this.isImg){if(!t.parent().length)return void this.destroy()}else n=t.find("img"),this.$images=n,this.length=n.length;if(this.ready){var a=[],i=void 0;p.each(this.$items,function(t,i){var e=p(i).find("img")[0],s=n[t];s?s.src!==e.src&&a.push(t):a.push(t)}),this.$list.width("auto"),this.initList(),this.visible&&(this.length?this.viewed&&(0<=(i=p.inArray(this.index,a))?(this.viewed=!1,this.view(Math.max(this.index-(i+1),0))):this.$items.eq(this.index).addClass(c)):(this.$image=null,this.viewed=!1,this.index=0,this.image=null,this.$canvas.empty(),this.$title.empty()))}},destroy:function(){var t=this.$element;this.options.inline?this.unbind():(this.visible&&this.unbind(),t.off(F,this.start)),this.unbuild(),t.removeData(l)}},G={trigger:function(t,i){var e=p.Event(t,i);return this.$element.trigger(e),e},open:function(){this.$body.addClass(o).css("paddingRight",this.scrollbarWidth)},close:function(){this.$body.removeClass(o).css("padding-right",0)},shown:function(){var t=this.options;this.transitioning=!1,this.fulled=!0,this.visible=!0,this.render(),this.bind(),p.isFunction(t.shown)&&this.$element.one($,t.shown),this.trigger($)},hidden:function(){var t=this.options;this.transitioning=!1,this.viewed=!1,this.fulled=!1,this.visible=!1,this.unbind(),this.close(),this.$viewer.addClass(m),this.resetList(),this.resetImage(),p.isFunction(t.hidden)&&this.$element.one(z,t.hidden),this.trigger(z)},requestFullscreen:function(){var t=window.document;if(this.fulled&&!t.fullscreenElement&&!t.mozFullScreenElement&&!t.webkitFullscreenElement&&!t.msFullscreenElement){var i=t.documentElement;i.requestFullscreen?i.requestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullscreen&&i.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}},exitFullscreen:function(){this.fulled&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())},change:function(t){var i,e,l,s=this.pointers,n=s[Object.keys(s)[0]],a=n.endX-n.startX,o=n.endY-n.startY;switch(this.action){case r:this.move(a,o);break;case d:this.zoom((i=s,e=p.extend({},i),l=[],p.each(i,function(t,h){delete e[t],p.each(e,function(t,i){var e=Math.abs(h.startX-i.startX),s=Math.abs(h.startY-i.startY),n=Math.abs(h.endX-i.endX),a=Math.abs(h.endY-i.endY),o=Math.sqrt(e*e+s*s),r=(Math.sqrt(n*n+a*a)-o)/o;l.push(r)})}),l.sort(function(t,i){return Math.abs(t)<Math.abs(i)}),l[0]),!1,t),this.startX2=this.endX2,this.startY2=this.endY2;break;case h:this.action="switched",Math.abs(a)>Math.abs(o)&&(1<a?this.prev():a<-1&&this.next())}p.each(s,function(t,i){i.startX=i.endX,i.startY=i.endY})},isSwitchable:function(){var t=this.image,i=this.viewer;return 0<=t.left&&0<=t.top&&t.width<=i.width&&t.height<=i.height}},J=function(){function s(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,i,e){return i&&s(t.prototype,i),e&&s(t,e),t}}();var tt=function(){function e(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),!t||1!==t.nodeType)throw new Error("The first argument is required and must be an element.");this.element=t,this.$element=p(t),this.options=p.extend({},s,p.isPlainObject(i)&&i),this.action="",this.target=null,this.timeout=null,this.index=0,this.length=0,this.ready=!1,this.fading=!1,this.fulled=!1,this.isImg=!1,this.played=!1,this.playing=!1,this.tooltiping=!1,this.transitioning=!1,this.viewed=!1,this.visible=!1,this.wheeling=!1,this.pointers={},this.init()}return J(e,[{key:"init",value:function(){var e=this,t=this.$element,i=this.options,s=t.is("img"),n=s?t:t.find("img"),a=n.length;a&&(j(document.createElement(l).style.transition)&&(i.transition=!1),this.isImg=s,this.length=a,this.count=0,this.$images=n,this.$body=p("body"),this.scrollbarWidth=window.innerWidth-document.body.clientWidth,i.inline?(t.one(y,function(){e.view()}),n.each(function(t,i){i.complete?e.progress():p(i).one(E,p.proxy(e.progress,e))})):t.on(F,p.proxy(this.start,this)))}},{key:"progress",value:function(){this.count+=1,this.count===this.length&&this.build()}},{key:"build",value:function(){var t=this.$element,i=this.options;if(!this.ready){var e=t.parent(),s=p('<div class="viewer-container"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><ul class="viewer-toolbar"><li role="button" class="viewer-zoom-in" data-action="zoom-in"></li><li role="button" class="viewer-zoom-out" data-action="zoom-out"></li><li role="button" class="viewer-one-to-one" data-action="one-to-one"></li><li role="button" class="viewer-reset" data-action="reset"></li><li role="button" class="viewer-prev" data-action="prev"></li><li role="button" class="viewer-play" data-action="play"></li><li role="button" class="viewer-next" data-action="next"></li><li role="button" class="viewer-rotate-left" data-action="rotate-left"></li><li role="button" class="viewer-rotate-right" data-action="rotate-right"></li><li role="button" class="viewer-flip-horizontal" data-action="flip-horizontal"></li><li role="button" class="viewer-flip-vertical" data-action="flip-vertical"></li></ul><div class="viewer-navbar"><ul class="viewer-list"></ul></div></div><div class="viewer-tooltip"></div><div role="button" class="viewer-button" data-action="mix"></div><div class="viewer-player"></div></div>'),n=s.find("."+l+"-button"),a=s.find("."+l+"-navbar"),o=s.find("."+l+"-title"),r=s.find("."+l+"-toolbar");this.$parent=e,this.$viewer=s,this.$button=n,this.$navbar=a,this.$title=o,this.$toolbar=r,this.$canvas=s.find("."+l+"-canvas"),this.$footer=s.find("."+l+"-footer"),this.$list=s.find("."+l+"-list"),this.$player=s.find("."+l+"-player"),this.$tooltip=s.find("."+l+"-tooltip"),o.addClass(i.title?K(i.title):m),r.addClass(i.toolbar?K(i.toolbar):m),r.find("li[class*=zoom]").toggleClass(g,!i.zoomable),r.find("li[class*=flip]").toggleClass(g,!i.scalable),i.rotatable||r.find("li[class*=rotate]").addClass(g).appendTo(r),a.addClass(i.navbar?K(i.navbar):m),n.toggleClass(m,!i.button),i.inline?(n.addClass("viewer-fullscreen"),s.css("z-index",i.zIndexInline),"static"===e.css("position")&&e.css("position","relative"),t.after(s)):(n.addClass("viewer-close"),s.css("z-index",i.zIndex).addClass([v,u,m].join(" ")).appendTo("body")),i.inline&&(this.render(),this.bind(),this.visible=!0),this.ready=!0,p.isFunction(i.ready)&&t.one(y,i.ready),this.trigger(y)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.$viewer.remove())}}],[{key:"setDefaults",value:function(t){p.extend(s,t)}}]),e}();if(p.extend&&p.extend(tt.prototype,Z,_,B,Q,G),p.fn){var it=p.fn.viewer;p.fn.viewer=function(o){for(var t=arguments.length,r=Array(1<t?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var h=void 0;return this.each(function(t,i){var e=p(i),s=e.data(l);if(!s){if(/destroy/.test(o))return;var n=p.extend({},e.data(),p.isPlainObject(o)&&o);s=new tt(i,n),e.data(l,s)}if(N(o)){var a=s[o];p.isFunction(a)&&(h=a.apply(s,r))}}),j(h)?this:h},p.fn.viewer.Constructor=tt,p.fn.viewer.setDefaults=tt.setDefaults,p.fn.viewer.noConflict=function(){return p.fn.viewer=it,this}}});